notifications:
  email: false

language: minimal

jobs:
  include:
    - os: linux
      services:
        - docker
      env: DOCKER_IMAGE=quay.io/pypa/manylinux2010_x86_64
            PLAT=manylinux2010_x86_64
      install:
        - docker pull $DOCKER_IMAGE
      script:
        - docker run --rm -e PLAT=$PLAT -v `pwd`:/io $DOCKER_IMAGE $PRE_CMD /io/travis/build-linux.sh
        - ls -l dist/
      deploy:
        provider: pypi
        distributions: "sdist bdist_wheel"
        skip_cleanup: true
        on:
          all_branches: true
    # - os: osx
    #   language: shell
    #   sudo: required
    #   install:
    #     - brew cask install graalvm/tap/graalvm-ce-java11
    #     - export PATH=/Library/Java/JavaVirtualMachines/graalvm-ce-java11-20.0.0/Contents/Home/bin:"$PATH"
    #     - gu install native-image
    #     - brew install swig
    #   script:
    #     - java -version
    #     - native-image --version
    #     - cmake --version
    #     - swig -version
    #     - python3 --version
    #     - python3 setup.py bdist_wheel
    #     - pip3 install pytest
    #     - pip3 install python-jgrapht --no-index -f dist/
    #     - pytest tests
    # - os: linux
    #   arch: arm64
    #   sudo: required
    #   services:
    #     - docker
    #   env: DOCKER_IMAGE=quay.io/pypa/manylinux2014_aarch64
    #         PLAT=manylinux2014_aarch64
    #   install:
    #     - docker pull $DOCKER_IMAGE
    #   script:
    #     - docker run --rm -e PLAT=$PLAT -v `pwd`:/io $DOCKER_IMAGE $PRE_CMD /io/travis/linux-prepare-arm64.sh
    #     - ls -l dist/
    
